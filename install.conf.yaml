- defaults:
    link:
      relink: true
      create: true
- clean: ["~", "~/bin"]
- shell:
    - [git submodule update --init --recursive, Installing submodules]
    - command: ./machines/osx/setup-homebrew.sh
      if: "[ `uname` = Darwin ]"
      description: Installing Homebrew and Essential Packages
      stdout: true
    - description: Downloading NvChad editor to ~/.config/nvchad-nvim
      command: git clone https://github.com/NvChad/starter ~/.config/nvchad-nvim
      stdout: true
- link:
    # ------------------------------------------------------------
    # editor
    # ------------------------------------------------------------
    # Neovim (Unix)
    ~/.config/nvim:
      if: "python3 -c \"import sys;exit(sys.platform=='win32')\""
      create: true
      glob: true
      path: ./editor/nvim
      force: false
    # Neovim (Windows)
    ~/AppData/Local/nvim:
      if: "ver"
      path: ./editor/nvim
      force: true
    # LazyVim
    ~/.config/LazyVim/:
      create: true
      glob: true
      path: ./editor/lazyvim/
      force: false
    # VS Code Linux
    ~/.config/Code/User:
      if: "[[ `uname` = Linux ]]"
      glob: true
      path: ./editor/vscode/linux/*.json
      force: true
    # VS Code MacOS
    ~/Library/Application Support/Code/User:
      if: "[ `uname` = Darwin ]"
      glob: true
      path: ./editor/vscode/macos/*.json
      force: true
    ~/Library/Application Support/Code/User/snippets:
      if: "[ `uname` = Darwin ]"
      path: ./editor/vscode/snippets
      force: true
    # VS Code MacOS Insiders
    ~/Library/Application Support/Code - Insiders/User:
      if: "[ `uname` = Darwin ]"
      glob: true
      path: ./editor/vscode/macos/*.json
      force: true
    # Cursor MacOS
    ~/Library/Application Support/Cursor/User:
      if: "[ `uname` = Darwin ]"
      glob: true
      path: ./editor/cursor/macos/*.json
      force: true
    ~/Library/Application Support/Cursor/User/snippets:
      if: "[ `uname` = Darwin ]"
      path: ./editor/cursor/snippets
      force: true
    # Cursor Windows
    ~/AppData/Roaming/Cursor/User/keybindings.json:
      if: "ver"
      path: ./editor/cursor/linux/keybindings.json
      force: true
    ~/AppData/Roaming/Cursor/User/settings.json:
      if: "ver"
      path: ./editor/cursor/linux/settings.json
      force: true
    # Zed
    ~/.config/zed/keymap.json:
      path: ./editor/zed/keymap.json
      force: false
    ~/.config/zed/settings.json:
      path: ./editor/zed/settings.json
      force: false
    # ------------------------------------------------------------
    # shell
    # ------------------------------------------------------------
    ~/.secrets:
      if: "test -f env/.secrets"
      path: ./env/.secrets
      force: true
    ~/.secrets.ps1:
      if: "ver"
      path: ./env/.secrets.ps1
      force: true
      ignore-missing: true
    ~/.sharecredentials:
      if: "test -f env/.sharecredentials"
      path: ./env/.sharecredentials
      force: true
    ~/.zshrc:
      path: ./shell/zsh/.zshrc
      force: true
    ~/.oh-my-zsh: ./shell/zsh/oh-my-zsh
    ~/.config/fish/:
      glob: true
      path: ./shell/fish/*
      force: true
    ~/.config/mise/config.toml:
      path: ./tools/mise/config.toml
    ~/.zgenom:
      path: ./shell/zsh/zgenom
      force: true
    ~/.bashrc:
      path: ./shell/bash/.bashrc
      force: true
    ~/.bash_profile:
      path: ./shell/bash/.bash_profile
      force: true
    # PowerShell / Oh-My-Posh (Windows)
    ~/.config/powershell/user_profile.ps1:
      if: "ver"
      path: ./shell/powershell/user_profile.ps1
      force: true
    ~/.config/powershell/jconnor.omp.json:
      if: "ver"
      path: ./shell/powershell/jconnor.omp.json
      force: true
    ~/bin:
      glob: true
      path: ./shell/functions/*
      relink: true
    ~/.config/starship.toml:
      path: ./shell/starship.toml
      relink: true
    ~/.ssh/config:
      if: "test -f ssh/config"
      path: ./ssh/config
      force: true
    # ------------------------------------------------------------
    # terminal
    # ------------------------------------------------------------
    ~/.config/alacritty/:
      glob: true
      path: ./terminal/alacritty/*
    ~/.config/wezterm/:
      glob: true
      path: ./terminal/wezterm/*
    ~/.config/kitty/:
      glob: true
      path: ./terminal/kitty/*
    # Ghostty (Unix)
    ~/.config/ghostty/:
      if: "python3 -c \"import sys;exit(sys.platform=='win32')\""
      glob: true
      path: ./terminal/ghostty/*
    # Ghostty (Windows)
    ~/AppData/Roaming/ghostty/config:
      if: "ver"
      path: ./terminal/ghostty/config
    # ------------------------------------------------------------
    # tools
    # ------------------------------------------------------------
    ~/.tmux.conf:
      path: ./tools/tmux/.tmux.conf
    ~/.gitconfig:
      path: ./tools/git/.gitconfig
    ~/.gitconfig-work:
      path: ./tools/git/.gitconfig-work
      force: true
    ~/.gitconfig-personal:
      path: ./tools/git/.gitconfig-personal
      force: true
    ~/.prettierrc.js:
      path: ./languages/node/prettierrc.js
    ~/.config/karabiner/karabiner.json:
      path: ./tools/karabiner/karabiner.json
    ~/.config/sketchybar/:
      glob: true
      path: ./tools/sketchybar/*
    ~/.config/aerospace/aerospace.toml:
      path: ./tools/aerospace/aerospace.toml
    ~/.hammerspoon:
      if: "[ `uname` = Darwin ]"
      path: ./tools/hammerspoon
      force: true
    ~/Library/Application Support/com.colliderli.iina/input_conf/YouTube.conf:
      if: "[ `uname` = Darwin ]"
      path: ./tools/iina/YouTube.conf
      force: true
    ~/Library/Application Support/espanso:
      if: "[ `uname` = Darwin ]"
      path: ./tools/espanso
      force: true
    # ------------------------------------------------------------
    # scripts - non auto sourced
    # ------------------------------------------------------------
    ~/bin/dev-setup:
      path: ./shell/scripts/dev-setup.sh
      relink: true
    ~/bin/share-ssh-keys:
      if: "test -f shell/scripts/share-ssh-keys.sh"
      path: ./shell/scripts/share-ssh-keys.sh
      relink: true
    ~/bin/clear-icon-cache:
      path: ./shell/scripts/clear-icon-cache.sh
      relink: true
- shell:
    - command: ./tools/mise/setup-mise.sh
      if: "python3 -c \"import sys;exit(sys.platform=='win32')\""
      description: Installing and configuring mise runtime versions
      stdout: true
      quiet: false
- shell:
    - command: ./tools/git/set-gitconfig.sh
      if: "python3 -c \"import sys;exit(sys.platform=='win32')\""
      description: Configuring Git
      stdout: true
      quiet: false
    - command: yarn config set prefix ~/.yarn
      if: "python3 -c \"import sys;exit(sys.platform=='win32')\""
      description: Configuring yarn prefix
      stdout: true
      quiet: false
    - command: ./tools/tmux/setup-tmux.sh
      if: "python3 -c \"import sys;exit(sys.platform=='win32')\""
      description: Setting up tmux plugins
      stdout: true
      quiet: false

# ------------------------------------------------------------
# machines
# ------------------------------------------------------------
